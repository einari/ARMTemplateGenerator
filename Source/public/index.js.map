{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;;;AAEA,IAAM,0BAA0B,CAAhC;;IAEa,K,WAAA,K;AAET,qBAAc;AAAA;;AACV,YAAI,OAAO,IAAX;;AAEA,aAAK,KAAL,GAAa,GAAG,eAAH,EAAb;AACA,aAAK,OAAL,GAAe,sBAAf;;AAEA,aAAK,iBAAL,GAAyB,0CAAzB;;AAEA,aAAK,UAAL,GAAkB,KAAK,OAAL,CAAa,UAA/B;AACA,aAAK,UAAL,GAAkB,KAAK,OAAL,CAAa,UAA/B;;AAEA,aAAK,KAAL,GAAa,GAAG,eAAH,EAAb;AACA,aAAK,WAAL,GAAmB,GAAG,UAAH,CAAc,EAAd,CAAnB;AACA,aAAK,UAAL,GAAkB,GAAG,UAAH,CAAc,CAAd,CAAlB;;AAEA,YAAI,KAAK,OAAL,CAAa,MAAb,MAAyB,KAA7B,EAAqC;AACjC,iBAAK,iBAAL,CAAuB,KAAK,OAAL,CAAa,KAAb,EAAvB;AACH;;AAED,aAAK,OAAL,CAAa,MAAb,CAAoB,SAApB,CAA8B;AAAA,mBAAM,KAAK,iBAAL,CAAuB,KAAK,OAAL,CAAa,KAAb,EAAvB,CAAN;AAAA,SAA9B;;AAEA,aAAK,UAAL,GAAkB,WAAK,MAAL,EAAlB;;AAEA,aAAK,cAAL,GAAsB,GAAG,QAAH,CAAY,YAAM;AACpC,mBAAO,KAAK,SAAL,CAAe;AAClB,oBAAI,KAAK,UADS;AAElB,yBAAS,KAAK,KAAL;AAFS,aAAf,CAAP;AAIH,SALqB,CAAtB;AAMH;;;;0CAEiB,K,EAAO;AACrB,gBAAI,QAAQ,EAAZ;;AAEA,gBAAI,WAAW,EAAf;;AAEA,kBAAM,OAAN,CAAc,UAAC,IAAD,EAAO,KAAP,EAAiB;AAC3B,oBAAI,OAAQ,QAAQ,QAAT,GAAqB,CAAhC;AACA,oBAAI,CAAC,MAAM,IAAN,CAAL,EAAmB;AACf,0BAAM,IAAN,IAAc,EAAd;AACH;;AAED,sBAAM,IAAN,EAAY,IAAZ,CAAiB,IAAjB;AACH,aAPD;;AASA,iBAAK,UAAL,CAAgB,MAAM,MAAtB;;AAEA,iBAAK,KAAL,CAAW,KAAX;;AAEA,iBAAK,WAAL,CAAiB,MAAM,CAAN,CAAjB;AACH;;;mCAEU,I,EAAM;AACb,iBAAK,WAAL,CAAiB,IAAjB;AACH;;;0CAEiB;AACd,gBAAI,QAAQ,EAAZ;;AAEA,mBAAO,KAAP;AACH;;;8CAEqB,CAErB;;;4BAEG,I,EAAM;AACN,iBAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB;AACH;;;+BAEM,I,EAAM;AACT,iBAAK,KAAL,CAAW,MAAX,CAAkB,IAAlB;AACH;;;gCAEO;AACJ,iBAAK,KAAL,CAAW,EAAX;AACH;;;mCAEU;AACP,iBAAK,iBAAL,CAAuB,QAAvB,CAAgC,KAAK,KAAL,EAAhC;AACH","file":"index.js","sourcesContent":["import {Catalog} from \"./catalog\";\nimport {TemplateGenerator} from \"./TemplateGenerator\";\nimport {Guid} from \"./Guid\";\n\nconst MAX_PAGES_IN_PAGINATION = 5;\n\nexport class index\n{\n    constructor() {\n        var self = this;\n        \n        this.items = ko.observableArray();\n        this.catalog = new Catalog();\n        \n        this.templateGenerator = new TemplateGenerator();\n        \n        this.publishers = this.catalog.publishers;\n        this.categories = this.catalog.categories;\n    \n        this.pages = ko.observableArray();\n        this.currentPage = ko.observable([]);\n        this.totalPages = ko.observable(0);\n        \n        if( this.catalog.isBusy() == false ) {\n            this.preparePagedItems(this.catalog.items());\n        }\n        \n        this.catalog.isBusy.subscribe(() => self.preparePagedItems(self.catalog.items()));\n        \n        this.templateId = Guid.create();\n        \n        this.templateAsJson = ko.computed(() => {\n            return JSON.stringify({\n                id: self.templateId,\n                content: self.items()\n            });\n        });\n    }\n    \n    preparePagedItems(items) {\n        var pages = [];\n        \n        var pageSize = 10;\n        \n        items.forEach((item, index) => {\n            var page = (index / pageSize) | 0;\n            if( !pages[page] ) {\n                pages[page] = [];\n            } \n            \n            pages[page].push(item);\n        });\n        \n        this.totalPages(pages.length);\n        \n        this.pages(pages);\n        \n        this.currentPage(pages[0]);\n    }\n    \n    selectPage(page) {\n        this.currentPage(page);\n    }\n    \n    getVisiblePages() {\n        var pages = [];\n        \n        return pages; \n    }\n    \n    morePagesNotVisible() {\n        \n    }\n    \n    add(item) {\n        this.items.push(item);\n    }\n    \n    remove(item) {\n        this.items.remove(item);\n    }\n    \n    clear() {\n        this.items([]);\n    }\n    \n    download() {\n        this.templateGenerator.download(this.items());\n    }\n}"],"sourceRoot":"/source/"}